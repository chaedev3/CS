# IP(Internet Protocol) 

![Desktop - 11](https://github.com/chaedev3/CS/assets/109324466/8cdc45ba-cd41-486f-9903-e5aaf7d591ac)

<br/>

## ⭐ IP(Internet Protocol) 

> IP(Internet Protocol) 란 인터넷에서 다른 컴퓨터와 통신할 때 사용하는 프로토콜로 IP 주소는 숫자로 구성되어 인터넷에 연결된 장치를 식별하는 역할을 합니다. 

![image](https://github.com/chaedev3/CS/assets/109324466/b7fac85a-4791-4889-83bd-3d8f9f3f194b)

- 즉, 웹 사이트에 접속할 때 브라우저에 www.naver.com 을 치면 DNS 서버에서 해당 도메인에 맞는 ip를 찾아서 통신하는 것입니다. 

<br/>

### 💗 IP 주소 종류 (IPv4, IPv6) 

- 일반적으로 IP 주소라 하면 IPv4를 말함 

<br/>

#### 👀 IPv4 

- IPv4 는 IP version 4의 약자로 전 세계적으로 사용된 첫 번째 인터넷 프로토콜 
- 172.16.254.1 과 같이 마침표로 구분된 4개의 숫자가 있는, 점으로 분리된 10진수 형식으로 표시된다 (0~255까지의 숫자)  

​		 ![image](https://github.com/chaedev3/CS/assets/109324466/ab82894d-8b88-43c1-a707-8b3655fd603f)

- 즉, IP는 32bit 로 이루어진 주소이며 이를 합산해보면 약 43억개(2^32)의 주소를 가지게 됨

<br/>

> 이처럼 IPv4는 약 43억개의 주소를 가질 수 있지만, 전 세계 인구를 생각하면 적은 숫자이다. 이런 문제를 해결하기 위해 등장한 주소가 바로 IPv6이다. 

<br/>

#### 👀 IPv6 

- IP version 6의 약자로, IPv4 주소체계를 128비트 크기로 확장한 차세대 인터넷 프로토콜 주소이다. 16비트씩 8자리로 각 자리는 콜론으로 구분한다. 

![**image**](https://github.com/chaedev3/CS/assets/109324466/af5e257c-39f3-43c6-9afd-8cd12ccde2f0)

- IPv6의 128비트 주소공간은 128 비트로 표현할 수 있는 2^128개인 약  3.4x1038개(340,282,366,920,938,463,463,374,607,431,768,211,456개) 의 주소를 갖고 있어 거의 무한대로 쓸 수 있다. 
- 하지만, 기존의 주소체계를 변경하는데 비용이 많이 들어 상용화가 되지 않음 

<br/>

### 💗 IP 종류 (공인 IP/ 사설 IP/ 고정 IP/ 유동 IP) 

- IP는 고정IP, 유동 IP, 공인 IP, 사설 IP로 나뉨 

<br/>

그렇다면 우리나라에 부여된 IP 가 1억 1천만개 정도인데 나만 해도 핸드폰, 아이패드, 노트북, 데스크탑 .. ip를 부여받아야할 기기가 4개나 되는데 ip 주소를 어떻게 부여하는 거지?   

<br/>

#### 👀 고정 IP 

- 컴퓨터에 고정적으로 부여된 IP 
- 한 번 부여되면 IP 반납을 하기 전까지 다른 장비에 부여할 수 없는 고유의 IP로 보안성이 우수하기 때문에 보안이 필요한 업체나 기관에서 사용 

<br/>

#### 👀 유동 IP 

- 변하는 IP  
- 인터넷 사용자 모두에게 고정 IP를 부여해 주기는 힘들기 때문에, 일정한 주기 또는 사용자들이 인터넷에 접속하는 매 순간마다 사용하고 있지 않은 IP 주소를 임시로 발급해 주는 IP다.  (사용하지 않는 인터넷에도 IP를 계속 부여해준다면 IP주소가 부족하겠죠?) 
- 대부분의 사용자는 유동 IP를 사용 

-> 그러니까 .. 내 노트북을 카페나 회사 와이파이에 연결을 하면 IP가 바뀌고 집에 가만히 있어도 바뀌게 됨 ..!! (일정한 주기를 기준으로 바뀜) 

<br/>

#### 👀 공인 IP 

- IP 주소는 전 세계적으로 ICANN이라는 기관이 국가별로 사용할 IP 대역을 관리 (우리나라에게 약 1억 1천만개의 IP 부여) ->  한국인터넷진흥원(KISA)에서 국내 IP 주소들을 관리 -> ISP (Internet Service Provider, KT / SKT / LG 같은 통신업체를 말함) 가 IP 를 제공하는 것임
- 이렇게 발급받은 IP를 공인 IP라고 한다.

-> 그러니까 곧 공인 IP는 고정 IP 나 유동 IP가 될 수 있다. 

<br/>

#### 👀 사설 IP  

- 하나의 공통된 공인 IP에 묶어서 그 안에서만 안 겹치는 사설 IP를 각각 줘버리면 한정된 IP로도 부족하지 않게 나눠줄 수 있음 - 즉, 공유기를 사용한 인터넷 접속 환경일 경우 공유기까지는 공인 IP를 할당하지만, 공유기에 연결되어 있는 가정이나 회사의 각 네트워크 기기에는 사설 IP를 할당 

- 예를 들면, 서울시 OO구 OO로 OO 아파트가 공인 IP 이고 OO 동 OO 호가 사설 IP 인 것임

   -> 즉, 공인 IP는 전 세계에서 유일하지만, 사설 IP는 하나의 네트워크 안에서 유일하다.  
   
   ![화면 캡처 2023-06-21 093424](https://github.com/chaedev3/CS/assets/109324466/229b1941-6a36-409c-9668-23bc4582c2b5)

<br/>



## ⭐ NAT (사설망 <-> 외부 통신 방법) 

<br/>

### 💗 사설망

> 사설망이란 공유기를 사용한 인터넷 접속 환경일 경우 공유기까지는 공인 IP를 할당 하지만, 공유기가 연결되어 있는 가정이나 회사의 각 네트워크 기기에는 사설 IP를 할당하여 그룹으로 묶는 방법이다. 

![화면 캡처 2023-06-21 092727](https://github.com/chaedev3/CS/assets/109324466/04438bfa-f287-4bbe-ba46-7ca0d0d02c52)

#### 👀 Gateway 

> 게이트웨이는 '관문' 이나 '출입구' 라는 의미로 다양한 분야에서 일반적으로 사용되는 용어이다. 컴퓨터 네트워크에서의 게이트웨이는 현재 사용자가 위치한 네트워크에서 다른 네트워크로 이동하기 위해 반드시 거쳐야 하는 지점을 의미한다. 



### 💗 NAT(Network Adress Translation) 

> NAT 은 Network Adress 인 IP를 변환하겠다는 뜻이고 NAT을 이용하는 이유는 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함이다. 



#### 👀 예를 들어보자! 

만약 내가 네이버 사이트에 접속하고 싶다면, 컴퓨터는 Gateway에 해당되는 공유기에게 신호를 보낸다. 

![화면 캡처 2023-06-21 094928](https://github.com/chaedev3/CS/assets/109324466/854733b7-3547-441d-a5db-e808fb86b165)

신호를 받은 공유기는 다음 순서에 따라 네이버에게 요청을 보낸다. 

1) 먼저 요청받은 사설ip를 기록한다. (192.168.0.4) 
2) 요청한 컴퓨터 ip는 외부에서 접속할 수 없는 사설 ip니까 사설 ip를 공인 ip로 변환한다. 

공유기는 이 요청을 공인 ip 주소로 네이버에게 요청을 하고 네이버는 그 요청을 처리한다. 다시 공인ip로 보내고, 공유기에서 다시 사설 ip 로 보내서 통신을 완료한다. 

![화면 캡처 2023-06-21 094957](https://github.com/chaedev3/CS/assets/109324466/60574b0f-0ccd-408a-9ff4-7905e5b6ea0e)

> 즉, 사설 IP 를 사용하고 있는 컴퓨터가 사설 바깥쪽에 있는 공인 ip에 해당되는 외부세계에 접속할 수 있게 되는데 이때 사용되는 기술이 바로 **NAT** 이다.  



<br/>

#### **📒 참고** 

https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-IP-%EA%B8%B0%EC%B4%88-%EC%82%AC%EC%84%A4IP-%EA%B3%B5%EC%9D%B8IP-NAT-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A7%90-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC#%EC%82%AC%EC%84%A4_ip__%EC%82%AC%EC%84%A4%EB%A7%9D_%EC%9B%90%EB%A6%AC 

https://sunrise-min.tistory.com/entry/Public-IP%EC%99%80-Private-IP%EB%9E%80-NAT%EB%9E%80 

https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-NAT-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80 